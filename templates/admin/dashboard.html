{% extends "admin/base.html" %}

{% block title %}Dashboard - Admin Panel{% endblock %}
{% block page_title %}Dashboard Overview{% endblock %}

{% block admin_content %}
<!-- Quick Stats -->
<div class="dashboard-grid">
    <div class="dashboard-card">
        <div class="card-icon">
            <i class="fas fa-users"></i>
        </div>
        <div class="card-value">{{ total_users }}</div>
        <div class="card-label">Total Users</div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-icon">
            <i class="fas fa-box"></i>
        </div>
        <div class="card-value">{{ total_products }}</div>
        <div class="card-label">Total Products</div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-icon">
            <i class="fas fa-shopping-cart"></i>
        </div>
        <div class="card-value">{{ total_orders }}</div>
        <div class="card-label">Total Orders</div>
    </div>
    
    <div class="dashboard-card">
        <div class="card-icon">
            <i class="fas fa-money-bill-wave"></i>
        </div>
        <div class="card-value">KSh {{ "%.2f"|format(total_revenue) }}</div>
        <div class="card-label">Total Revenue</div>
    </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
    <a href="{{ url_for('admin_users') }}" class="action-card">
        <i class="fas fa-user-plus"></i>
        <h4>Manage Users</h4>
        <p>View and manage user accounts</p>
    </a>
    
    <a href="{{ url_for('admin_products') }}" class="action-card">
        <i class="fas fa-plus-circle"></i>
        <h4>Add Product</h4>
        <p>Create new product listings</p>
    </a>
    
    <a href="{{ url_for('admin_orders') }}" class="action-card">
        <i class="fas fa-clipboard-list"></i>
        <h4>View Orders</h4>
        <p>Process and manage orders</p>
    </a>
    
    <a href="{{ url_for('admin_analytics') }}" class="action-card">
        <i class="fas fa-chart-line"></i>
        <h4>Analytics</h4>
        <p>View sales and performance</p>
    </a>
</div>

<!-- Charts Section -->
<div class="charts-grid">
    <div class="chart-card">
        <div class="chart-header">
            <h3>Sales Overview</h3>
            <span class="chart-period">Last 30 Days</span>
        </div>
        <div class="chart-placeholder"></div>
    </div>
    
    <div class="chart-card">
        <div class="chart-header">
            <h3>Revenue Trends</h3>
            <span class="chart-period">Monthly</span>
        </div>
        <div class="chart-placeholder"></div>
    </div>
</div>

<!-- Recent Orders -->
<div class="data-table">
    <div class="table-header">
        <h3>Recent Orders</h3>
        <a href="{{ url_for('admin_orders') }}" class="btn btn-outline">View All</a>
    </div>
    <table>
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for order in recent_orders %}
            <tr>
                <td>#{{ order.id }}</td>
                <td>{{ order.user.name }}</td>
                <td>KSh {{ "%.2f"|format(order.total_amount) }}</td>
                <td>
                    <span class="status-badge status-active">{{ order.status }}</span>
                </td>
                <td>{{ order.created_at.strftime('%Y-%m-%d') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Low Stock Products -->
<div class="data-table">
    <div class="table-header">
        <h3>Low Stock Products</h3>
        <a href="{{ url_for('admin_products') }}" class="btn btn-outline">Manage Products</a>
    </div>
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Category</th>
                <th>Stock</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for product in low_stock_products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.category }}</td>
                <td>{{ product.stock }}</td>
                <td>KSh {{ "%.2f"|format(product.price) }}</td>
                <td>
                    <span class="status-badge {% if product.stock == 0 %}status-inactive{% else %}status-warning{% endif %}">
                        {% if product.stock == 0 %}Out of Stock{% else %}Low Stock{% endif %}
                    </span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
